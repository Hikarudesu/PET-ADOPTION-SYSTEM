{% extends 'app/base.html' %}

{% block title %}Write Review - {{ pet.name }}{% endblock %}

{% block content %}
<div class="container" style="margin-top: 2rem; margin-bottom: 3rem; max-width: 700px;">
    <a href="{% url 'pet_detail' pet.id %}" style="color: #667eea; text-decoration: none; margin-bottom: 1rem; display: inline-block;">‚Üê Back to {{ pet.name }}</a>
    
    <div style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h1 style="margin-bottom: 0.5rem;">‚≠ê Write a Review</h1>
        <p style="color: #666; margin-bottom: 2rem;">Share your experience with <strong>{{ pet.name }}</strong></p>

        <!-- Pet Info Card -->
        <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px; margin-bottom: 2rem;">
            <div style="display: flex; gap: 1rem; align-items: center;">
                {% if pet.image %}
                    <img src="{{ pet.image.url }}" alt="{{ pet.name }}" style="width: 80px; height: 80px; border-radius: 8px; object-fit: cover;">
                {% else %}
                    <div style="width: 80px; height: 80px; background: #e0e0e0; border-radius: 8px; display: flex; align-items: center; justify-content: center;">üì∑</div>
                {% endif %}
                <div>
                    <h4 style="margin: 0;">{{ pet.name }}</h4>
                    <p style="margin: 0.3rem 0; color: #666;">{{ pet.breed }}</p>
                </div>
            </div>
        </div>

        <!-- Review Form -->
        <form method="post" novalidate>
            {% csrf_token %}
            
            {% for field in form %}
                <div style="margin-bottom: 1.5rem;">
                    <label for="{{ field.id_for_label }}" style="display: block; font-weight: bold; margin-bottom: 0.5rem;">
                        {{ field.label }}
                    </label>
                    
                    {% if field.name == 'rating' %}
                        <select name="rating" id="{{ field.id_for_label }}" style="
                            width: 100%;
                            padding: 0.75rem;
                            border: 1px solid #ddd;
                            border-radius: 4px;
                            font-size: 1rem;
                        ">
                            <option value="">Select a rating</option>
                            <option value="1">‚≠ê 1 - Poor</option>
                            <option value="2">‚≠ê‚≠ê 2 - Fair</option>
                            <option value="3">‚≠ê‚≠ê‚≠ê 3 - Good</option>
                            <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê 4 - Very Good</option>
                            <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5 - Excellent</option>
                        </select>
                    {% elif field.name == 'content' %}
                        <textarea name="content" id="{{ field.id_for_label }}" rows="6" placeholder="Share your experience with this pet..." style="
                            width: 100%;
                            padding: 0.75rem;
                            border: 1px solid #ddd;
                            border-radius: 4px;
                            font-size: 1rem;
                            font-family: inherit;
                        "></textarea>
                    {% else %}
                        <input type="text" name="{{ field.name }}" id="{{ field.id_for_label }}" placeholder="{{ field.label }}" style="
                            width: 100%;
                            padding: 0.75rem;
                            border: 1px solid #ddd;
                            border-radius: 4px;
                            font-size: 1rem;
                        ">
                    {% endif %}
                    
                    {% if field.errors %}
                        <div style="color: #dc3545; margin-top: 0.5rem; font-size: 0.9rem;">
                            {{ field.errors.0 }}
                        </div>
                    {% endif %}
                    
                    {% if field.help_text %}
                        <small style="color: #999; display: block; margin-top: 0.3rem;">
                            {{ field.help_text|safe }}
                        </small>
                    {% endif %}
                </div>
            {% endfor %}

            <!-- Info Box -->
            <div style="padding: 1rem; background: #e7f3ff; border-left: 4px solid #2196F3; border-radius: 4px; margin-bottom: 2rem;">
                <strong>üí° Tip:</strong> Be honest and constructive. Your review helps other potential adopters make informed decisions.
            </div>

            <!-- Buttons -->
            <div style="display: flex; gap: 1rem;">
                <button type="submit" style="
                    flex: 1;
                    padding: 0.75rem 1.5rem;
                    background: #667eea;
                    color: white;
                    border: none;
                    border-radius: 5px;
                    font-size: 1rem;
                    font-weight: bold;
                    cursor: pointer;
                    transition: background 0.3s;
                " onmouseover="this.style.background='#764ba2'" onmouseout="this.style.background='#667eea'">
                    üìù Post Review
                </button>
                <a href="{% url 'pet_detail' pet.id %}" style="
                    flex: 1;
                    padding: 0.75rem 1.5rem;
                    background: #6c757d;
                    color: white;
                    text-decoration: none;
                    border-radius: 5px;
                    font-size: 1rem;
                    font-weight: bold;
                    text-align: center;
                    transition: background 0.3s;
                " onmouseover="this.style.background='#5a6268'" onmouseout="this.style.background='#6c757d'">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
